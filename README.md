# f1-pitstop-strategy
 A pit-stop optimization strategy project on Formula One racing
<!-- wp:paragraph -->
<p>A Big Data Analytics project initiative on Formula One racing.</p>
<!-- /wp:paragraph -->

<!-- wp:more -->
<!--more-->
<!-- /wp:more -->

<!-- wp:spacer {"height":45} -->
<div style="height:45px" aria-hidden="true" class="wp-block-spacer"></div>
<!-- /wp:spacer -->

<!-- wp:buttons {"contentJustification":"center"} -->
<div class="wp-block-buttons is-content-justification-center"><!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(135deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" href="https://wp.cs.hku.hk/fyp20002/f1/2/" style="border-radius:50px;background:linear-gradient(135deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa" rel="">About This Project</a></div>
<!-- /wp:button -->

<!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(317deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" href="https://wp.cs.hku.hk/fyp20002/f1/3/" style="border-radius:50px;background:linear-gradient(317deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa">Progress Updates</a></div>
<!-- /wp:button -->

<!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(42deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" style="border-radius:50px;background:linear-gradient(42deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa">References</a></div>
<!-- /wp:button --></div>
<!-- /wp:buttons -->

<!-- wp:spacer {"height":45} -->
<div style="height:45px" aria-hidden="true" class="wp-block-spacer"></div>
<!-- /wp:spacer -->

<!-- wp:group -->
<div class="wp-block-group"><div class="wp-block-group__inner-container"><!-- wp:image {"align":"left","id":2852,"width":178,"height":178,"sizeSlug":"large","className":"is-style-rounded"} -->
<div class="wp-block-image is-style-rounded"><figure class="alignleft size-large is-resized"><img src="https://wp.cs.hku.hk/wp-content/uploads/Ross-Brawn-1.jpg" alt="" class="wp-image-2852" width="178" height="178"/></figure></div>
<!-- /wp:image -->

<!-- wp:pullquote -->
<figure class="wp-block-pullquote"><blockquote><p>"It was an innovative approach of an existing idea, and <br>Formula One is all about innovative design. <br>It's a cornerstone and objective of the sport." — Ross Brawn</p></blockquote></figure>
<!-- /wp:pullquote -->

<!-- wp:embed {"url":"https://www.youtube.com/watch?v=F4eq0ES3_yc","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper">
https://www.youtube.com/watch?v=F4eq0ES3_yc
</div></figure>
<!-- /wp:embed -->

<!-- wp:embed {"url":"https://www.youtube.com/watch?v=1ZslQhqMbtk\u0026amp;t=153s","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->
<figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper">
https://www.youtube.com/watch?v=1ZslQhqMbtk&amp;t=153s
</div></figure>
<!-- /wp:embed -->

<!-- wp:spacer {"height":45} -->
<div style="height:45px" aria-hidden="true" class="wp-block-spacer"></div>
<!-- /wp:spacer --></div></div>
<!-- /wp:group -->

<!-- wp:cover {"url":"https://wp.cs.hku.hk/wp-content/uploads/Pitstop-2.jpg","id":2827} -->
<div class="wp-block-cover has-background-dim"><img class="wp-block-cover__image-background wp-image-2827" alt="" src="https://wp.cs.hku.hk/wp-content/uploads/Pitstop-2.jpg" data-object-fit="cover"/><div class="wp-block-cover__inner-container"><!-- wp:paragraph {"align":"center","placeholder":"Write title…","style":{"typography":{"fontSize":31}}} -->
<p class="has-text-align-center" style="font-size:31px">Scuderia Ferrari Pit-stop for Charles Leclerc, Spanish GP 2020</p>
<!-- /wp:paragraph --></div></div>
<!-- /wp:cover -->

<!-- wp:nextpage -->
<!--nextpage-->
<!-- /wp:nextpage -->

<!-- wp:spacer {"height":22} -->
<div style="height:22px" aria-hidden="true" class="wp-block-spacer"></div>
<!-- /wp:spacer -->

<!-- wp:heading {"level":1} -->
<h1>Project Background</h1>
<!-- /wp:heading -->

<!-- wp:heading -->
<h2>Formula One: The king of motorsport</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Formula One has been the top motorsport racing event worldwide for 70 years. While the constructors compete by developing their engine and chassis with the latest technologies, real-time race simulations are also conducted back in the factories to provide useful insights that could greatly affect team decision making before and during the race. The results are sent to the pit wall, where the race engineers make pit stop strategy decisions and communicate with the drivers and all pit crew members.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Recently in 2019, the FIA (F1 official) has generously made racing data available, a move that immensely lower the barrier to data mining and analytics from the public. Supported by motorsportstats.com, the online database gives numeric details of every historical race, such as lap time, pit stop decisions, driver and constructor championship scores, circuit and weather data, etc. Along with trust-worthy third-party data providers online such as STATS F1, Ergast, Kaggle, and more, we could gather sufficient pieces of data that formulate a digital version of every F1 race.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In this multi-million-dollar industry, a digital war has never been fiercer among back-end factories of each constructor team. Although it is widely known that every competitor possesses such facilities that serve as strategy suggestions, most of the details of how the simulation machines and algorithms are hidden from publicity for two apparent reasons: fear of being copied by competitors, and the enormous amount of resources put into the research and development.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>In light of increasing audience engagement, F1 engaged with the AWS team to provide real-time analytical summaries graphically to let the audience gain effectively more insights about the race. Examples of insights include chasing distance between two competitors, predicted pit-stop strategy, and the probability of overtaking. This opens a new door to transform how audiences traditionally watch a car race, by feeling how close a car chase is even if the two cars are a pit stop apart (at approximately 30 seconds apart from each other). Increasing effort in new features and improvement in prediction accuracy has been seen in the 2019 and 2020 seasons as AWS takes bold strides on committing consistent developments.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2>Motivation of the project</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In the past decade, top teams such as Mercedes Benz, Scuderia Ferrari, Red Bull, and McLaren F1 Racing has committed huge and fatal pit-stop strategy calls, costing them victories or even the championships. Infamous instances include the 2012 Abu Dhabi GP Alonso’s too-early pit-stop, 2015 Monaco GP Hamilton too-late pit-stop, and the list goes on. When car competitiveness and driver skill level have marginal distinctness, the pit-stop strategy can be very decisive, if not determinant, to the race result. A good pit-stop allows overtaking without even a high-risk close car fight, while a bad pit-stop could put the car in traffic, harming the tyres and the possibility to make overtaking maneuvers.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The major motivation of this project stems from the persistently unsatisfactory performance in the racing strategy of the Scuderia Ferrari F1 Team throughout recent seasons. While the analytical prediction of tyre degradation, gas consumption, and checking of car condition perform up to standard, Ferrari passively reacts to racing incidents and make slow pit-stop decisions after observing how the other teams react. This project serves as a plug-and-use for Scuderia Ferrari as a useful reference to make pit-stop calls by considering all race factors. The project should also standalone be a general prediction model of race result if it is fed with real-time racing data during a race</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":1} -->
<h1>Project Objective</h1>
<!-- /wp:heading -->

<!-- wp:heading -->
<h2>Main Objective</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>In this project, the main objective is to build a system that is trained with historical race data to predict the optimal pit-stop strategy for the two drivers in the Scuderia Ferrari F1 Team. The system should consider a wide range of factors that are collected in real-time, so to dynamically generate position information and chasing distances before and after possible pit-stop at each lap, hence optimizing the pit-stop strategy by selecting the pit-stop that creates the best result in terms of track position and probability of overtaking.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2>Stage Goals</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>To achieve our main objective, we break the project down to several stage goals. For the use of historical race data, we need to find out the correlation between these factors:</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true,"type":"1"} -->
<ol type="1"><li>Laps undercut VS possibility of undercut</li><li>Laps overcut VS possibility of overcut</li><li>Change in tyre compound VS gain/loss in track position before the next tyre change</li><li>Track temperature VS tyre compounds lifespan</li><li>Track altitude change VS tyre compounds lifespan</li><li>Undercut and Overcut possibility change under wet and half-wet conditions</li><li>Undercut and Overcut possibility change under high and low downforce car set-up</li><li>Gentleness of throttle and braking VS tyre lifespan</li><li>Number of overtake maneuvers VS tyre lifespan</li><li>Driving style and preference of oversteer and understeer VS tyre lifespan</li><li>Pit decisions under safety car / virtual safety car conditions</li><li>More factors to be explored in later stages.</li></ol>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>The next goal is to build a system that can read in real-time data input, such as information about track position, weather condition, overtakes, delta lap time, etc. It will simulate all possible pit-stop strategies at every lap dynamically and generate reports on each outcome. After ranking all outcomes, the system should suggest the user on which lap should the car be pitted in for new tyres, with the probability of the predicted resulting track position.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Since we have to evaluate the accuracy of our model, our next goal is to use recent F1 seasons as testing data and reach an accuracy rate of &gt;= 70% of predicting final track position after adopting a certain pit-stop strategy.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":1} -->
<h1>Project Methodology</h1>
<!-- /wp:heading -->

<!-- wp:heading -->
<h2>Data Source and Data Collection</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>This project relies on several main data sources, including FIA F1 official website, STATS F1, Ergast, McLarenf-1, and also Kaggle for open-source data sources. F1 TV subscription provides telemetry data and traditional live broadcast services for live real-time data analytics. General relational database management software will be adopted for data storage after conducting data cleansing.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2>Machine Learning</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>This project adopts machine learning for precise predictions and constant refinement of the prediction model. Feeding the learning model with previous race data, it should create a balanced equilibrium of all factors influencing pit-stop strategy. AWS SageMaker is planned to facilitate this task, and Amazon S3 will also be employed for storage purposes. We will use the most recent seasons for the initial stage since they have the closest relevancy to the regulations of the current season, such as regulations on car design, fuel usage, track design, etc. The project will then extend to older seasons as well as including qualifying results and free practice results for evaluation of car performances during the final phase.</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2>Data Visualization and Decision Support System (DSS)</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Decision Support System is the interface for race engineers to evaluate and deploy the analysis results. We planned to subscribe to a third party DSS provider for their design layout, but we are still in search of which platform to use. Graph visualization could also be conducted through the use of D3.js for a better understanding of data analysis results. The user interface must be real-time, highly interactive, as clear and simple as possible.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":1} -->
<h1>Project Schedule and Milestones</h1>
<!-- /wp:heading -->

<!-- wp:table -->
<figure class="wp-block-table"><table><tbody><tr><td><strong>Date</strong></td><td><strong>Milestones</strong></td></tr><tr><td><strong>Week 1-3</strong><strong></strong></td><td>Set-up of AWS Project, test-run AWS ML API services, scrap all race data from 2019 F1 season</td></tr><tr><td><strong>Week 4-5</strong></td><td>Use stage goal 1 and 2 (Laps undercut VS possibility of undercut, and Laps overcut VS possibility of overcut) to train the model. Try to predict other historical race events with the model and judge the correctness.</td></tr><tr><td><strong>Week 6-7</strong><strong></strong></td><td>Refine the model according to test results. Enlarge the scope to include stage goals 3, 4, 5 to the factors, check correctness by using historical race events.</td></tr><tr><td><strong>Week 8-10</strong></td><td>Refine the model. Enlarge the scope to stage goals 6, 7, 8. Start working on DSS user interface.</td></tr><tr><td><strong>Week 11-13</strong><strong></strong></td><td>Stage goals 9, 10, 11, and new factors can be introduced. DSS should be fundamentally functional by the end of this stage. Start importing and using 2018, 2017 race data to train the model.</td></tr></tbody></table><figcaption>Phrase 1: 4th Oct 2020 - 31st Dec 2020</figcaption></figure>
<!-- /wp:table -->

<!-- wp:table -->
<figure class="wp-block-table"><table><tbody><tr><td><strong>Date</strong></td><td><strong>Milestones</strong></td></tr><tr><td><strong>Week 1-3</strong><strong></strong></td><td>Buffer period for catching up unfinished goals from Second Phrase. Finish the interim report and prepare for the first presentation.</td></tr><tr><td><strong>Week 4-6</strong></td><td>2020 season should have ended on 13 Dec 2020. We would replay selected race events and evaluate our current system model. We will devise a simulator of events, sourced from race replay at F1 TV, to mock a real-time race event and adopt our system. Prediction precision should exceed 70% at this stage. Modification of our model according to the evaluation result will be conducted.</td></tr><tr><td><strong>Week 7-9</strong><strong></strong></td><td>If further modification is not needed, we analyze the race data from qualifying sessions of 2019, including Q1, Q2, and Q3. Categorizing the qualifying data to be used in training the model, and then use it to train the model.</td></tr><tr><td><strong>Week 10-12</strong></td><td>Start making a 3-minute video and start writing the final report. Apply final adjustments and fixes to the system.</td></tr><tr><td><strong>Week 13-15</strong><strong></strong></td><td>Start preparing for the final presentation. Finish the 3-minute video and the final report.</td></tr></tbody></table><figcaption>Phrase 2: 1st Jan 2021 - 18th Apr 2021</figcaption></figure>
<!-- /wp:table -->

<!-- wp:image {"align":"center","id":1093,"width":224,"height":288,"sizeSlug":"large","className":"is-style-default"} -->
<div class="wp-block-image is-style-default"><figure class="aligncenter size-large is-resized"><img src="https://wp.cs.hku.hk/wp-content/uploads/profile-photo.jpg" alt="" class="wp-image-1093" width="224" height="288"/><figcaption>Mentee: Chan M. C., Jack</figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:image {"align":"center","id":1094,"width":229,"height":278,"sizeSlug":"large"} -->
<div class="wp-block-image"><figure class="aligncenter size-large is-resized"><img src="https://wp.cs.hku.hk/wp-content/uploads/prof.jpg" alt="" class="wp-image-1094" width="229" height="278"/><figcaption>Supervisor: Professor Choi, Y. K., Loretta</figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>For enquiries, please contact me at jackchan0528@gmail.com, or via phone at +852 98233530</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Thank you!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>To be updated every Saturday!</p>
<!-- /wp:paragraph -->

<!-- wp:buttons {"contentJustification":"center"} -->
<div class="wp-block-buttons is-content-justification-center"><!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(135deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" href="https://wp.cs.hku.hk/fyp20002/f1/" style="border-radius:50px;background:linear-gradient(135deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa" rel="">Back to Home Page</a></div>
<!-- /wp:button -->

<!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(317deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" href="https://wp.cs.hku.hk/fyp20002/f1/" style="border-radius:50px;background:linear-gradient(317deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa">Previous Page</a></div>
<!-- /wp:button -->

<!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(42deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" href="https://wp.cs.hku.hk/fyp20002/f1/3/" style="border-radius:50px;background:linear-gradient(42deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa">Next Page</a></div>
<!-- /wp:button --></div>
<!-- /wp:buttons -->

<!-- wp:nextpage -->
<!--nextpage-->
<!-- /wp:nextpage -->

<!-- wp:spacer {"height":22} -->
<div style="height:22px" aria-hidden="true" class="wp-block-spacer"></div>
<!-- /wp:spacer -->

<!-- wp:heading {"level":1} -->
<h1>Progress Updates</h1>
<!-- /wp:heading -->

<!-- wp:cover {"url":"https://wp.cs.hku.hk/wp-content/uploads/cartoon-pitstop-1.jpg","id":2920} -->
<div class="wp-block-cover has-background-dim"><img class="wp-block-cover__image-background wp-image-2920" alt="" src="https://wp.cs.hku.hk/wp-content/uploads/cartoon-pitstop-1.jpg" data-object-fit="cover"/><div class="wp-block-cover__inner-container"><!-- wp:heading {"textAlign":"center","level":1} -->
<h1 class="has-text-align-center">Box, box, box!<br>We are pitting this lap</h1>
<!-- /wp:heading --></div></div>
<!-- /wp:cover -->

<!-- wp:spacer {"height":22} -->
<div style="height:22px" aria-hidden="true" class="wp-block-spacer"></div>
<!-- /wp:spacer -->

<!-- wp:heading {"level":1} -->
<h1>Second Phrase</h1>
<!-- /wp:heading -->

<!-- wp:heading -->
<h2>Week 1-3 (4th - 24th Oct 2020)</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Goal:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Set-up of AWS Project</li><li>Test-run AWS ML API services</li><li>Scrap all race data from 2019 F1 season</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Progress:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>2019 F1 Official Racing data is scraped to CSV format, and currently under data cleansing process</li><li>Met trouble in AWS Sagemaker console, therefore switched to TensorFlow ML in the meanwhile until the problem is fixed</li><li>Set up CUDA for using graphic card GPU for running the ML programs</li></ul>
<!-- /wp:list -->

<!-- wp:separator {"className":"is-style-wide"} -->
<hr class="wp-block-separator is-style-wide"/>
<!-- /wp:separator -->

<!-- wp:heading -->
<h2>Week 4-5 (25th Oct - 7th Nov 2020)</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Goal:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Use stage goal 1 and 2 (Laps undercut VS possibility of undercut, and Laps overcut VS possibility of overcut) to train the model.</li><li>Try to predict other historical race events with the model and judge the correctness.</li><li>Test out GPU Farm</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Progress:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Tested on GPU Farm, installed Anaconda, Tensorflow, ipykernel, pandas.</li><li>GPU Farm workflow is clumsy for early stages, switch back to local GPU compilation.</li><li>Data scraping from last week is further processed, with some data cleansing and further processing.</li><li>Derived dataset: Lap Delta and total lap times are compiled for later usage.</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Problems and Issues:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Problem 1:</li><li></li><li>Inconsistency in data: total lap times of 2 drivers, say Driver A and B, could have illogical time difference, such as Driver A in front takes longer time to finish that lap than Driver B.</li><li>Possible cause: Overtake occurs at the start/finish main straight line, but too ambiguous such that the lap chart cannot reflect who was in front. Or simply input error.</li><li>Solution: Leave the minor error and either 1) disregard that record, or 2) check the full race at a later stage</li><li></li><li>Problem 2:</li><li></li><li>Laps undercut when the number of pits is larger than 1: It is unfair to compare the undercut attempts with 2 pit stops against the other 1 stop drivers.</li><li>Solution: Leave 2 stops alone and deal with the comparisons later on.</li><li></li><li>Problem 3:</li><li></li><li>Definition problem: how is an undercut or overcut defined? After we "see" the result of undercut attempt, i.e. both drivers pitted in for new tyres, whoever goes in front may seem to be the winner between 2 of them. However, older tyres should suffer from loss of grip and lower lap speed.</li><li>Solution: Leave the definition as the delta position between "before Driver A pit-in" and "after Driver B pit-in". We believe that the loss in lap speed will be reflected in future parameters such that we don't need to take it into consideration in this factor.</li></ul>
<!-- /wp:list -->

<!-- wp:separator {"className":"is-style-wide"} -->
<hr class="wp-block-separator is-style-wide"/>
<!-- /wp:separator -->

<!-- wp:heading -->
<h2>Week 6-7 (8th Nov - 21st Nov 2020)</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Goal:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Refine the model according to test results.</li><li>Enlarge the scope to include stage goals 3, 4, 5 to the factors</li><li>Check correctness by using historical race events.</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Stage goals:</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->
<ol id="block-3812480f-8580-46e4-9af5-1fc9726142d3"><li>Laps undercut VS possibility of undercut</li><li>Laps overcut VS possibility of overcut</li><li>Change in tyre compound VS gain/loss in track position before the next tyre change</li><li>Track temperature VS tyre compounds lifespan</li><li>Track altitude change VS tyre compounds lifespan</li></ol>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Progress:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul id="block-09dad34f-55b5-4617-91d4-0f857cac9f94"><li><em>Stage goals 3, 4 data extracted for use</em></li><li><em>5 need further processing (track slight changes affect altitude, need to search for a better source of data)</em> </li><li><em>Learning Functional API due to function restrictions on Sequential</em></li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Problems and Issues:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Problem 1:</li><li></li><li>to add the 2nd factor in each list element, it should correspond to the same driver / same event. Now the "laps undercut" is not specifically related to any driver or any specific event</li><li>Solution: Add the driver ID to each record, and duplicate future factors, and map to driver ID.</li><li></li><li>Problem 2:</li><li></li><li>some of the tyres used during the races are "used" tyres: they are used during practice or qualify sessions. It might affect the degrade speed and conditions. I am disregarding the fact that they are used or not for now.</li><li>Solution: disregarding by not distinguishing them, later on add another variable to describe tyre condition (also need to think about what data to gather and use)</li><li></li><li>Problem 3:</li><li></li><li>Lap number when the car go into pit is not representative enough: each race has different lap distance and total number of laps. </li><li>Solution: take % of total laps would be more representative: 15th lap/71 laps = 15/71 = 21.127%</li><li></li><li>Problem 4:</li><li>Last time we cannot solve the problem with multiple pit stops and undercut/overcut calculation. The result we used last time is laps gained</li><li>Solution: we changed the result to be 2-factor result: 1) final position - initial position (final position gain/loss) and 2) pre-magnified final position points (winner gets 25 points, 1st runner up get 18, etc...) Reason: to award position gain and to award defensive efforts. It also implies that we can take undercutting result in a general view (total position gain VS position gained on the opponent on the grid)</li><li></li><li>Problem 5:</li><li></li><li>Wet and intermediate tyres cannot be used in the same training model with other C1 to C5 tyres since it is not having a direct correlation with dry (slick) tyres.</li><li>Solution: create a separate model only for wet / semi-wet conditions</li><li></li><li>Problem 6:</li><li></li><li>To define compound change, we need a unified representation no matter how many times a car pit in.</li><li>Solution: add padding, but implementation is still under consideration.</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Schedule change</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Due to final exam period and school work being heavier, we will postpone 4 weeks (Week 8-11) </p>
<!-- /wp:paragraph -->

<!-- wp:separator {"className":"is-style-wide"} -->
<hr class="wp-block-separator is-style-wide"/>
<!-- /wp:separator -->

<!-- wp:heading -->
<h2>Week 12-13 (24th Dec - 31st Dec 2020)</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Goal:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Refine the model according to test results.</li><li>Enlarge the scope to include stage goals 6, 7, 8, 9, 10, 11 to the factors</li><li>Check correctness by using historical race events.</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Stage goals:</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->
<ol id="block-3812480f-8580-46e4-9af5-1fc9726142d3"><li>Laps undercut VS possibility of undercut</li><li>Laps overcut VS possibility of overcut</li><li>Change in tyre compound VS gain/loss in track position before the next tyre change</li><li>Track temperature VS tyre compounds lifespan</li><li>Track altitude change VS tyre compounds lifespan</li><li>Undercut and Overcut possibility change under wet and half-wet conditions</li><li>Undercut and Overcut possibility change under high and low downforce car set-up</li><li>Gentleness of throttle and braking VS tyre lifespan</li><li>Number of overtake maneuvers VS tyre lifespan</li><li>Driving style and preference of oversteer and understeer VS tyre lifespan</li><li>Pit decisions under safety car / virtual safety car conditions</li></ol>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Progress:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul id="block-09dad34f-55b5-4617-91d4-0f857cac9f94"><li>For predicting how a certain pit strategy affect final position, we revert to Keras Sequential model</li><li><em>Calculational error detected from stage goal 3, and the method of calculation for goal 1 and 2 are not representative enough, need to scratch the factor for now</em></li><li><em>Stage goals 3,4,5 resulted in 25% accuracy at best case.</em></li><li><em>Decide to make a new model for wet conditions (Stage goals 6)</em></li><li>Stage goal 7 has no publicly available data, so I attempted to use cornering speed (high cornering speed = high downforce). Yet to be implemented.</li><li>Attempted to use Keras Functional API to identify tyre lockup (Stage goal 8). Resolution problems might cause the model not identifying lockups.</li><li>Stage goal 9 cannot be fully reflected by lap chart, reason is that position change may be due to overtakes or pit decision (need discrimination)</li><li>Attempted to use Keras Functional API to identify correction maneuvers (Stage goal 10). Not enough instances are captured, will try gathering more frames.</li><li>Stage goal 11 is regarded as the "Accident Prediction model" being developed for the next stage.</li><li>Extracting 2018 data, extraction problem exists, so I wrote a web scraper python program to extract data from web.</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Lockup identification:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>--&gt; Training stage</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->
<ol><li>Extract onboard camera of the moments of lock-up</li><li>Export as separate frames in jpg format</li><li>Identify the jpg with smoke near the tyre</li><li>Feed into the TF functional API model</li><li>Save the weight model</li></ol>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>--&gt; Practical usage:</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->
<ol><li>Load the model</li><li>Have a real time video capture system that translate live video to mp4</li><li>Feed into the model (which changes mp4 to frames in jpg, and analyze them)</li><li>Count the number of lockups in real time</li></ol>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>--&gt; Historical lockup data:</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->
<ol><li>Feed to the first main model (Sequential: For predicting how a certain pit strategy affect final position) as a new factor called "number of lockups"</li></ol>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Accident Prediction model:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul id="block-2dccf42c-01d3-4433-8069-ced78bd80538"><li>1. Tyre condition by image analysis</li><li>2. Drop in lap-time</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>New Factors to be introduced:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul id="block-2dccf42c-01d3-4433-8069-ced78bd80538"><li>Qualifying result time difference with other competitors</li><li>Driver racecraft</li><li>--&gt; number of historical overtake maneuvers of A to B (% of success/attempts per race) (Power rating)</li><li>Race Car performance</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Problems:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul id="block-b109063b-7ec2-45a0-986f-dba412c944a1"><li>2018 tyre compound mapping can be improved.<br>--&gt; superhard and hard tyre compound types are actually not used at all</li><li>medium = 1 (hardest)</li><li>soft = 2 (medium hard)</li><li>supersoft = 3 (medium)</li><li>ultrasoft = 4 (medium soft)</li><li>hypersoft = 5 (softest)</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":1} -->
<h1>Final Phrase</h1>
<!-- /wp:heading -->

<!-- wp:heading -->
<h2>Week 1-3 (1st Jan - 22nd Jan 2021)</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Goal:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>Prepare interim report</li><li>Prepare 1st presentation</li><li>Finalize the findings</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Progress:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul id="block-09dad34f-55b5-4617-91d4-0f857cac9f94"><li>Report submitted</li><li>Presentation hold and video capture submitted</li></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2>Week 4-6 (23rd Jan - 13th Feb 2021)</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Goal:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li><em>Extract data from 2014 to 2020</em> </li><li><em>Refine model on identifying lock-up tyres</em> </li><li><em>Start on model on predicting opponent’s pitstop</em></li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>Progress:</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul id="block-09dad34f-55b5-4617-91d4-0f857cac9f94"><li>Omit 2016 Bahrain, Chinese, Spanish, German, Singapore, Malaysian, United States because of excessive pit-stops made (more than 2)</li><li>Omit 2016 Brazilian GP: wet conditions with excessive pit-stops</li><li>RaceFans.net does not have pit stop tyre changes data for 2014 and 2015, so does the official website and other platforms</li></ul>
<!-- /wp:list -->

<!-- wp:buttons {"contentJustification":"center"} -->
<div class="wp-block-buttons is-content-justification-center"><!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(135deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" href="https://wp.cs.hku.hk/fyp20002/f1/" style="border-radius:50px;background:linear-gradient(135deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa" rel="">Back to Home Page</a></div>
<!-- /wp:button -->

<!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(317deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" href="https://wp.cs.hku.hk/fyp20002/f1/2/" style="border-radius:50px;background:linear-gradient(317deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa">Previous Page</a></div>
<!-- /wp:button -->

<!-- wp:button {"borderRadius":50,"style":{"color":{"gradient":"linear-gradient(42deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%)","text":"#fffffa"}}} -->
<div class="wp-block-button"><a class="wp-block-button__link has-text-color has-background" href="https://wp.cs.hku.hk/fyp20002/f1/4/" style="border-radius:50px;background:linear-gradient(42deg,rgb(135,9,53) 0%,rgb(179,22,22) 100%);color:#fffffa">Next Page</a></div>
<!-- /wp:button --></div>
<!-- /wp:buttons -->
